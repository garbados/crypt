!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Crypt=e()}(function(){return function r(o,i,c){function a(n,e){if(!i[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(f)return f(n,!0);throw(t=new Error("Cannot find module '"+n+"'")).code="MODULE_NOT_FOUND",t}t=i[n]={exports:{}},o[n][0].call(t.exports,function(e){return a(o[n][1][e]||e)},t,t.exports,r,o,i,c)}return i[n].exports}for(var f="function"==typeof require&&require,e=0;e<c.length;e++)a(c[e]);return a}({1:[function(l,y,e){!function(e){!function(){const{encodeBase64:n,decodeBase64:t}=l("tweetnacl-util"),c="AES-GCM",r="PBKDF2";let o;try{o=window&&window.crypto}catch{}if(!o)try{o=e&&e.crypto}catch{}o=o||l("crypto").webcrypto;const{subtle:a,getRandomValues:i}=o;function f(e){return new TextEncoder("utf8").encode(e)}async function u(e){e=new Uint8Array(e);return i.call(o,e)}async function s(e,n){return a.deriveKey({name:r,salt:n,iterations:1e4,hash:"SHA-256"},e,{name:c,length:256},!0,["encrypt","decrypt"])}const d={getKeyFromPassword:async function(e){return a.importKey("raw",f(e),r,!1,["deriveKey"])},encrypt:async function(e,n){var t=await u(16),r=await u(16),o=await s(e,r),e=f(n),n={name:c,iv:t},e=await a.encrypt(n,o,e);const i=new Uint8Array(t.length+r.length+e.byteLength);return i.set(t),i.set(r,t.length),i.set(new Uint8Array(e),t.length+r.length),i},decrypt:async function(e,n){var t=n.slice(0,16),r=n.slice(16,32),n=n.slice(32),r=await s(e,r),t={name:c,iv:t};try{return await a.decrypt(t,r,n)}catch(e){throw"Cipher job failed"===e.message||""===e.message?new Error("Could not decrypt!"):e}}};y.exports=class{constructor(e){if(!e)throw new Error("A password is required for encryption or decryption.");this._pending=d.getKeyFromPassword(e).then(e=>{this._key=e})}async encrypt(e){await this._pending;e=await d.encrypt(this._key,e);return n(e)}async decrypt(e){await this._pending;e=t(e),e=await d.decrypt(this._key,e);return e=e,new TextDecoder("utf8").decode(e)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:"crypto","tweetnacl-util":3}],2:[function(e,n,t){},{}],3:[function(e,t,n){!function(n){!function(){!function(e,n){"use strict";void 0!==t&&t.exports?t.exports=n():(e.nacl||(e.nacl={}),e.nacl.util=n())}(this,function(){"use strict";var e={};function o(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");for(var n=unescape(encodeURIComponent(e)),t=new Uint8Array(n.length),r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t},e.encodeUTF8=function(e){for(var n=[],t=0;t<e.length;t++)n.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(n.join("")))},"undefined"==typeof atob?void 0!==n.from?(e.encodeBase64=function(e){return n.from(e).toString("base64")},e.decodeBase64=function(e){return o(e),new Uint8Array(Array.prototype.slice.call(n.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new n(e).toString("base64")},e.decodeBase64=function(e){return o(e),new Uint8Array(Array.prototype.slice.call(new n(e,"base64"),0))}):(e.encodeBase64=function(e){for(var n=[],t=e.length,r=0;r<t;r++)n.push(String.fromCharCode(e[r]));return btoa(n.join(""))},e.decodeBase64=function(e){o(e);for(var n=atob(e),t=new Uint8Array(n.length),r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),e})}.call(this)}.call(this,e("buffer").Buffer)},{buffer:2}]},{},[1])(1)});